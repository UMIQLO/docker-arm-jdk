#!/bin/bash
echo "██████╗  █████╗ ██████╗ ███████╗██████╗  ██████╗██╗     ██╗██████╗       ";
echo "██╔══██╗██╔══██╗██╔══██╗██╔════╝██╔══██╗██╔════╝██║     ██║██╔══██╗      ";
echo "██████╔╝███████║██████╔╝█████╗  ██████╔╝██║     ██║     ██║██████╔╝      ";
echo "██╔═══╝ ██╔══██║██╔═══╝ ██╔══╝  ██╔══██╗██║     ██║     ██║██╔═══╝       ";
echo "██║     ██║  ██║██║     ███████╗██║  ██║╚██████╗███████╗██║██║           ";
echo "╚═╝     ╚═╝  ╚═╝╚═╝     ╚══════╝╚═╝  ╚═╝ ╚═════╝╚══════╝╚═╝╚═╝           ";
echo "███╗   ███╗██╗███╗   ██╗███████╗ ██████╗██████╗  █████╗ ███████╗████████╗";
echo "████╗ ████║██║████╗  ██║██╔════╝██╔════╝██╔══██╗██╔══██╗██╔════╝╚══██╔══╝";
echo "██╔████╔██║██║██╔██╗ ██║█████╗  ██║     ██████╔╝███████║█████╗     ██║   ";
echo "██║╚██╔╝██║██║██║╚██╗██║██╔══╝  ██║     ██╔══██╗██╔══██║██╔══╝     ██║   ";
echo "██║ ╚═╝ ██║██║██║ ╚████║███████╗╚██████╗██║  ██║██║  ██║██║        ██║   ";
echo "╚═╝     ╚═╝╚═╝╚═╝  ╚═══╝╚══════╝ ╚═════╝╚═╝  ╚═╝╚═╝  ╚═╝╚═╝        ╚═╝   ";
echo "███████╗███████╗██████╗ ██╗   ██╗███████╗██████╗                         ";
echo "██╔════╝██╔════╝██╔══██╗██║   ██║██╔════╝██╔══██╗                        ";
echo "███████╗█████╗  ██████╔╝██║   ██║█████╗  ██████╔╝                        ";
echo "╚════██║██╔══╝  ██╔══██╗╚██╗ ██╔╝██╔══╝  ██╔══██╗                        ";
echo "███████║███████╗██║  ██║ ╚████╔╝ ███████╗██║  ██║                        ";
echo "╚══════╝╚══════╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚═╝  ╚═╝                        ";
echo "                                                                         ";


if [ "$BUILD_VERSION" = "latest" ]; then
        URL="https://destroystokyo.com/ci/job/Paper-1.13/lastSuccessfulBuild/artifact/paperclip.jar"
		echo " ██╗            ██╗██████╗            ██████╗ ";
		echo "███║           ███║╚════██╗           ╚════██╗";
		echo "╚██║           ╚██║ █████╔╝            █████╔╝";
		echo " ██║            ██║ ╚═══██╗            ╚═══██╗";
		echo " ██║    ██╗     ██║██████╔╝    ██╗    ██████╔╝";
		echo " ╚═╝    ╚═╝     ╚═╝╚═════╝     ╚═╝    ╚═════╝ ";
		echo "                                              ";
elif [ "$BUILD_VERSION" = "1.13" ]; then
        URL="https://destroystokyo.com/ci/job/Paper-1.13/lastSuccessfulBuild/artifact/paperclip-129.jar"
		echo " ██╗            ██╗██████╗            ██████╗ ";
		echo "███║           ███║╚════██╗           ╚════██╗";
		echo "╚██║           ╚██║ █████╔╝            █████╔╝";
		echo " ██║            ██║ ╚═══██╗            ╚═══██╗";
		echo " ██║    ██╗     ██║██████╔╝    ██╗    ██████╔╝";
		echo " ╚═╝    ╚═╝     ╚═╝╚═════╝     ╚═╝    ╚═════╝ ";
		echo "                                              ";
else
        echo "Version Error! (Your Selection: [$BUILD_VERSION])"
        echo "Only Support [latest / 1.13]"
        exit 0
fi

jarServer=paperclip-$BUILD_VERSION.jar

if [ -f server/"$jarServer" ]
then
	echo "$jarServer found."
else	
	echo "$jarServer not found."
	wget $URL -O $jarServer
	echo "eula=true" > eula.txt
	echo "java -Xms${MIN_RAM}M -Xmx${MAX_RAM}M -jar $jarServer"

	mv eula.txt server/
	mv $jarServer server/
fi

echo "███████╗███████╗██████╗ ██╗   ██╗███████╗██████╗     ███████╗████████╗ █████╗ ██████╗ ████████╗    ██╗██╗██╗";
echo "██╔════╝██╔════╝██╔══██╗██║   ██║██╔════╝██╔══██╗    ██╔════╝╚══██╔══╝██╔══██╗██╔══██╗╚══██╔══╝    ██║██║██║";
echo "███████╗█████╗  ██████╔╝██║   ██║█████╗  ██████╔╝    ███████╗   ██║   ███████║██████╔╝   ██║       ██║██║██║";
echo "╚════██║██╔══╝  ██╔══██╗╚██╗ ██╔╝██╔══╝  ██╔══██╗    ╚════██║   ██║   ██╔══██║██╔══██╗   ██║       ╚═╝╚═╝╚═╝";
echo "███████║███████╗██║  ██║ ╚████╔╝ ███████╗██║  ██║    ███████║   ██║   ██║  ██║██║  ██║   ██║       ██╗██╗██╗";
echo "╚══════╝╚══════╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚═╝  ╚═╝    ╚══════╝   ╚═╝   ╚═╝  ╚═╝╚═╝  ╚═╝   ╚═╝       ╚═╝╚═╝╚═╝";
echo "███████╗███╗   ██╗     ██╗ ██████╗ ██╗   ██╗    ██╗██╗██╗                                                   ";
echo "██╔════╝████╗  ██║     ██║██╔═══██╗╚██╗ ██╔╝    ██║██║██║                                                   ";
echo "█████╗  ██╔██╗ ██║     ██║██║   ██║ ╚████╔╝     ██║██║██║                                                   ";
echo "██╔══╝  ██║╚██╗██║██   ██║██║   ██║  ╚██╔╝      ╚═╝╚═╝╚═╝                                                   ";
echo "███████╗██║ ╚████║╚█████╔╝╚██████╔╝   ██║       ██╗██╗██╗                                                   ";
echo "╚══════╝╚═╝  ╚═══╝ ╚════╝  ╚═════╝    ╚═╝       ╚═╝╚═╝╚═╝                                                   ";
echo "██████╗ ██╗   ██╗    ██╗   ██╗███╗   ███╗██╗ ██████╗ ██╗      ██████╗     ██╗██╗██╗                         ";
echo "██╔══██╗╚██╗ ██╔╝    ██║   ██║████╗ ████║██║██╔═══██╗██║     ██╔═══██╗    ██║██║██║                         ";
echo "██████╔╝ ╚████╔╝     ██║   ██║██╔████╔██║██║██║   ██║██║     ██║   ██║    ██║██║██║                         ";
echo "██╔══██╗  ╚██╔╝      ██║   ██║██║╚██╔╝██║██║██║▄▄ ██║██║     ██║   ██║    ╚═╝╚═╝╚═╝                         ";
echo "██████╔╝   ██║       ╚██████╔╝██║ ╚═╝ ██║██║╚██████╔╝███████╗╚██████╔╝    ██╗██╗██╗                         ";
echo "╚═════╝    ╚═╝        ╚═════╝ ╚═╝     ╚═╝╚═╝ ╚══▀▀═╝ ╚══════╝ ╚═════╝     ╚═╝╚═╝╚═╝                         ";
echo "                                                                                                            ";

cd server/
java -Xms${MIN_RAM}M -Xmx${MAX_RAM}M -jar $jarServer